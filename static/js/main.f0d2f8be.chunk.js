(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){},175:function(e,t,a){},177:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),i=a(46),r=a.n(i),o=a(9),l=a(10),s=a(14),d=a(12),u=a(13),h=(a(100),a(21)),b=a(178),m=a(179),g=a(193),f=a(180),p=a(8),k=a.n(p),v=a(88),E=a.n(v),x=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={signedIn:!1},a.uiConfig={signInFlow:"popup",signInOptions:[k.a.auth.GoogleAuthProvider.PROVIDER_ID],callbacks:{signInSuccess:function(){return!1}}},a.toggle=a.toggle.bind(Object(h.a)(Object(h.a)(a))),a.state={isOpen:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"componentDidMount",value:function(){var e=this;k.a.auth().onAuthStateChanged(function(t){return e.setState({signedIn:!!t})})}},{key:"test",value:function(){var e=k.a.auth().currentUser;k.a.database().ref("users/"+e.uid).set({username:e.displayName,email:e.email})}},{key:"render",value:function(){return c.a.createElement("div",{className:"navbar-footer-background navbar-border mb-2"},c.a.createElement(b.a,{color:"faded",expand:"md"},c.a.createElement("a",{className:"navbar-brand"},"SuperProcrastinator"),c.a.createElement(m.a,{onClick:this.toggle}),c.a.createElement(g.a,{isOpen:this.state.isOpen,navbar:!0},c.a.createElement(f.a,{className:"ml-auto",navbar:!0},this.state.signedIn?c.a.createElement("div",{className:"my-auto"},c.a.createElement("img",{height:"42",width:"42",className:"img-fluid rounded-circle mr-3",src:k.a.auth().currentUser.photoURL,alt:"userPhoto"}),c.a.createElement("a",{className:"btn btn-primary text-white",onClick:function(){return k.a.auth().signOut()}},"Sign Out")):c.a.createElement(E.a,{uiConfig:this.uiConfig,firebaseAuth:k.a.auth()})))))}}]),t}(n.Component),O=a(184),C=a(185),y=a(186),j=a(187),L=a(183),S=a(194),w=a(188),N=a(182),I=(a(86),"reddit"),A="golem",_=a(181),U=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,null,[{key:"initCheckboxList",value:function(e){return{type:this.initCheckboxListAction,checkboxList:e}}},{key:"selectCheckbox",value:function(e){return{type:this.selectCheckboxAction,identifier:e}}},{key:"deselectCheckbox",value:function(e){return{type:this.deselectCheckboxAction,identifier:e}}}]),e}();U.initCheckboxListAction="checkbox:initCheckboxList",U.selectCheckboxAction="checkbox:selectCheckbox",U.deselectCheckboxAction="checkbox:deselectCheckbox";var P={checkboxList:[]};function T(e,t,a){for(var n=Object.assign({},e,{}),c=0;void 0!==n[c];){var i=n[c];if(c===t){n[c]=Object.assign({},i,{checked:a});break}c++}return n}var R=a(19),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TOPIC":return t.topic;default:return e}},W=a(47),B=a(26),F={},G={timestampFetched:null,isFetching:!1,posts:[],isInvalidated:!1},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INVALIDATE_TOPIC":return Object(B.a)({},e,{isInvalidated:!0});case"REQUEST_POSTS":return Object(B.a)({},e,{isFetching:!0,isInvalidated:!1});case"RECEIVE_POSTS":return Object(B.a)({},e,{isFetching:!1,isInvalidated:!1,posts:t.posts,timestampFetched:t.timestampFetched});default:return e}},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INVALIDATE_TOPIC":case"REQUEST_POSTS":case"RECEIVE_POSTS":return Object(B.a)({},e,Object(W.a)({},t.topic,V(e[t.topic],t)));default:return e}},M=Object(R.c)({selectedTopic:D,postsByTopic:J}),H=a(91),Q=a.n(H),z=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||R.d,X=Object(R.c)({checkboxList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0,a=-1;switch(t.type.match(/^checkbox:(de)?selectCheckbox$/)&&(a=function(e,t){for(var a=0;void 0!==e[a];){var n=e[a];if(n.props.identifier===t)return a;a++}return-1}(e.checkboxList,t.identifier)),t.type){case U.initCheckboxListAction:return console.log("action "+U.initCheckboxListAction),Object.assign({},e,{checkboxList:t.checkboxList});case U.selectCheckboxAction:return console.log("action "+U.selectCheckboxAction),Object.assign({},e,{checkboxList:T(e.checkboxList,a,!0)});case U.deselectCheckboxAction:return console.log("action "+U.deselectCheckboxAction),Object.assign({},e,{checkboxList:T(e.checkboxList,a,!1)});default:return e}},redditAPI:M}),$=Object(R.e)(X,z(Object(R.a)(Q.a)));$.subscribe(function(){console.log("State in storage changed!"),console.log($.getState())});var K=a(32),q=function(e){function t(e){var a;return Object(o.a)(this,t),a=Object(s.a)(this,Object(d.a)(t).call(this,e)),console.log("Checkbox props"),console.log(e),a.state={checked:e.checked},a.updateCheckboxState=a.updateCheckboxState.bind(Object(h.a)(Object(h.a)(a))),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"updateCheckboxState",value:function(){this.state.checked?($.dispatch(U.deselectCheckbox(this.props.identifier)),this.setState({checked:!1})):($.dispatch(U.selectCheckbox(this.props.identifier)),this.setState({checked:!0})),console.log(this.props.identifier);var e={reddit:void 0!==$.getState().checkboxList.checkboxList[0].checked&&$.getState().checkboxList.checkboxList[0].checked,golem:void 0!==$.getState().checkboxList.checkboxList[1].checked&&$.getState().checkboxList.checkboxList[1].checked};if(console.log("checkboxStates"),console.log(e),k.a.auth().currentUser){var t=k.a.auth().currentUser;k.a.database().ref("/users/"+t.uid).set({reddit:e.reddit,golem:e.golem})}}},{key:"render",value:function(){return c.a.createElement(_.a,{check:!0},c.a.createElement(N.a,{check:!0},c.a.createElement(L.a,{type:"checkbox",name:this.props.identifier,onClick:this.updateCheckboxState,defaultChecked:this.state.checked,onChange:this.onChange})," ",this.props.labelName))}}]),t}(n.Component),Y=Object(K.b)(function(e,t){var a=function(e,t){for(var a=0;void 0!==e[a];){if(e[a].props.identifier===t)return a;a++}return-1}(e.checkboxList.checkboxList,t.identifier);if(a>=0){var n=e.checkboxList.checkboxList[a];return{identifier:n.props.identifier,labelName:n.props.labelName}}return null})(q),Z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).checkboxList=[],a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.a.auth().onAuthStateChanged(function(t){t?e.loadCheckboxStates():(e.checkboxList=[c.a.createElement(Y,{key:I,identifier:I,labelName:"Reddit",checked:!1}),c.a.createElement(Y,{key:A,identifier:A,labelName:"Golem",checked:!1})],console.log("Dispatching content selection with array"),console.log(e.checkboxList),console.log("Sending ..."),$.dispatch(U.initCheckboxList(e.checkboxList)),e.forceUpdate())})}},{key:"loadCheckboxStates",value:function(){if(k.a.auth().currentUser){console.log("Logged in");var e=k.a.auth().currentUser.uid,t=this;console.log("User UID: "+e),k.a.database().ref("/users/"+e).once("value").then(function(e){if(e.val()){var a={reddit:e.val().reddit,golem:e.val().golem};t.checkboxList=[c.a.createElement(Y,{key:I,identifier:I,labelName:"Reddit",checked:a.reddit}),c.a.createElement(Y,{key:A,identifier:A,labelName:"Golem",checked:a.golem})],console.log("Dispatching content selection with array"),console.log(t.checkboxList),console.log("Sending ..."),$.dispatch(U.initCheckboxList(t.checkboxList)),t.forceUpdate()}})}}},{key:"render",value:function(){return c.a.createElement(O.a,{className:"ContentSelection"},c.a.createElement(C.a,null,c.a.createElement("h4",null,"Active Content")),c.a.createElement("hr",null),c.a.createElement(C.a,null,c.a.createElement(y.a,null,c.a.createElement("ul",{className:"list-group"},this.checkboxList.map(function(e){return c.a.createElement("li",null,e)})))),c.a.createElement("hr",null),c.a.createElement(C.a,null,c.a.createElement("h4",null,"Active Subreddits")),c.a.createElement("br",null),c.a.createElement(C.a,null,c.a.createElement(j.a,null,c.a.createElement(L.a,{placeholder:"Enter subreddit..."}),c.a.createElement(S.a,{addonType:"append"},c.a.createElement(w.a,{color:"primary"},"Add")))),c.a.createElement("br",null),c.a.createElement(C.a,null,c.a.createElement("div",{className:"input-group"},c.a.createElement("div",{className:"form-group has-feedback has-clear"},c.a.createElement(N.a,null,"Subreddit 1"),c.a.createElement("button",{type:"button",className:"close align-top","aria-label":"Close"},c.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))))}}]),t}(n.Component),ee=a(189),te=a(190),ae=a(191),ne=a(192),ce=a(66),ie=a.n(ce),re=a(92),oe=a.n(re),le=a(93),se=a.n(le),de=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={cards:[],checkboxList:[]},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"getCheckboxIndexByIdentifier",value:function(e,t){for(var a=0;void 0!==e[a];){if(e[a].props.identifier===t)return a;a++}return-1}},{key:"componentWillUpdate",value:function(){console.log("componentWillUpdate state:"),console.log("will update")}},{key:"componentWillReceiveProps",value:function(e){console.log("componentWillReceiveProps"),console.log(e),this.setState({cards:[]});var t=this,a=e.checkboxList,n=this.getCheckboxIndexByIdentifier(a,A);a[n].checked&&ie.a.getJSON("http://api.golem.de/api/article/latest/?key=4ef0b5c4164a4c5be46667df84ba4db8&jsonp=?",function(e){if(e.success){for(var a=[],n=e.data,c=0;c<n.length;c++)a.push({created:n[c].date,card:t.createGolemCard({id:"Golem_"+c,date:n[c].date,title:n[c].headline,imgUrl:n[c].leadimg.url,imgHeight:n[c].leadimg.height,imgWidth:n[c].leadimg.width,url:n[c].url})});t.setState({cards:t.state.cards.concat(a)}),t.setState(function(e){t.state.cards.sort(function(e,t){return t.created-e.created})})}}),a[n=this.getCheckboxIndexByIdentifier(a,I)].checked&&ie.a.getJSON("https://www.reddit.com/r/redditdev/.json",function(e){if(e){console.log(e);for(var a=[],n=e.data.children,c=0;c<10;c++)a.push({created:n[c].data.created_utc,card:t.createRedditCard({id:"Reddit_"+c,title:n[c].data.title,url:n[c].data.url,subreddit:n[c].data.subreddit})});t.setState({cards:t.state.cards.concat(a)}),t.setState(function(e){t.state.cards.sort(function(e,t){return t.created-e.created})})}})}},{key:"shuffleCards",value:function(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),n=[e[a],e[t]];e[t]=n[0],e[a]=n[1]}return e}},{key:"createGolemCard",value:function(e){return c.a.createElement(ee.a,{key:e.id,xs:"0",md:"4",lg:"3",className:"mb-3"},c.a.createElement(te.a,{className:"myCard"},c.a.createElement(ae.a,null,c.a.createElement("div",null,c.a.createElement("img",{className:"d-inline img-fluid",height:e.imgHeight,width:e.imgWidth,src:e.imgUrl,alt:"golemCard"}),c.a.createElement("img",{className:"d-inline float-right img-fluid rounded-circle",height:"80",width:"80",src:oe.a,alt:"golemIcon"})),c.a.createElement(ne.a,null,e.title),c.a.createElement(w.a,{target:"_blank",href:e.url,color:"primary"},"Continue reading"))))}},{key:"createRedditCard",value:function(e){return c.a.createElement(ee.a,{key:e.id,xs:"0",md:"4",lg:"3",className:"mb-3"},c.a.createElement(te.a,{className:"myCard"},c.a.createElement(ae.a,null,c.a.createElement("div",null,c.a.createElement("img",{className:"float-right img-fluid rounded-circle",height:"80",width:"80",src:se.a,alt:"redditIcon"})),c.a.createElement(ne.a,null,e.subreddit),c.a.createElement(ae.a,null,e.title),c.a.createElement(w.a,{target:"_blank",href:e.url,color:"primary"},"Continue reading"))))}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(C.a,null,this.state.cards.map(function(e){return e.card})))}}]),t}(n.Component),ue=Object(K.b)(function(e){return Object(B.a)({},e,{checkboxList:e.checkboxList.checkboxList})})(de),he=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement(C.a,{className:"mainContent mx-3"},c.a.createElement(ee.a,{xs:"0",md:"3",lg:"2",className:"contentSelection"},c.a.createElement(Z,null)),c.a.createElement(ee.a,{md:"9",lg:"10",className:"contentView"},c.a.createElement(ue,null)))}}]),t}(n.Component),be=(a(175),a(94)),me=a.n(be),ge=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"Footer py-4 navbar-footer-background footer-border"},c.a.createElement("a",{href:"https://github.com/mortenterhart/super-procrastinator",target:"_blank",rel:"noopener noreferrer"},c.a.createElement("img",{alt:"Github Logo",src:me.a,className:"github-logo",width:"30",height:"30"})),c.a.createElement("a",{className:"d-inline mr-5",href:"https://github.com/mortenterhart/super-procrastinator",target:"_blank",rel:"noopener noreferrer"},"GitHub"),c.a.createElement("p",{className:"d-inline"},"Copyright \xa9 2018 SuperProcrastinator Inc."))}}]),t}(n.Component);k.a.initializeApp({apiKey:"AIzaSyDew41OBlxbC6VB8WOgA-d6mDlyJx-mh_E",authDomain:"superprocrastinator-d826b.firebaseapp.com",databaseURL:"https://superprocrastinator-d826b.firebaseio.com",projectId:"superprocrastinator-d826b",storageBucket:"superprocrastinator-d826b.appspot.com",messagingSenderId:"340186055169"});var fe=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(d.a)(t).call(this))).contextPath=e.extractContextPath(),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"extractContextPath",value:function(){return window.location.pathname.substring(0,window.location.pathname.indexOf("/",2))}},{key:"render",value:function(){return c.a.createElement(K.a,{store:$},c.a.createElement("div",{className:"background"},c.a.createElement(x,null),c.a.createElement(he,null),c.a.createElement(ge,null)))}}]),t}(n.Component),pe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ke(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(176);r.a.render(c.a.createElement(fe,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/super-procrastinator",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/super-procrastinator","/service-worker.js");pe?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ke(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ke(e)})}}()},86:function(e,t,a){},92:function(e,t,a){e.exports=a.p+"static/media/golemIcon.cbb9637b.png"},93:function(e,t,a){e.exports=a.p+"static/media/redditIcon.63204bbb.png"},94:function(e,t,a){e.exports=a.p+"static/media/github-logo.b53ff55e.svg"},95:function(e,t,a){e.exports=a(177)}},[[95,1,2]]]);
//# sourceMappingURL=main.f0d2f8be.chunk.js.map